{% extends 'layout.html' %}
{% block content %}
    <div class="timeline-header">
        <img src="{{ url_for('static', filename='img/user.jpg') }}" class="user-picture">
        <h1>
            {{ profile.username }}
            <!-- TODO: create a button to follow/unfollow -->
            {% if followed != None %}
                {% if followed %}
                    <a href="{{ url_for('unfollow_user', profile_id=profile.id) }}">Unfollow</a></h1>
                {% elif not followed %}
                    <a href="{{ url_for('follow_user', profile_id=profile.id) }}">Follow</a>
                {% endif %}
            {% endif %}
        </h1>
    </div>
    <div class="timeline">
        <div class="question-list">
            {% for question in questions %}
                <!-- TODO: I dont have sure about this <a></a> tag -->
                <p><a href="{{ url_for('profile_page', profile_id=question.user.id) }}">{{ question.user.username }}</a>: {{ question.question }}</p>
                {% if profile.id == current_user.id %}
                    <div class="label label-danger">
                        <a href="{{ url_for('delete_question', question_id=question.id) }}">
                            x
                        </a>
                    </div>
                {% endif %}
                <form action="{{ url_for('add_answer', question_id=question.id) }}" method="post">
                    <textarea name="answer" id="" cols="50" rows="2" required></textarea>
                    <input type="submit" value="Responder">
                </form>
                <div class="answers">
                    {% for answer in question.answers %}
                        <p>
                            <a href="{{ url_for('user_profile', profile_id=answer.user.id) }}">{{ answer.user.username }}</a>: {{ answer.answer }}
                            {% if answer.user_id == current_user.id %}
                                <div class="label label-danger">
                                    <a href="{{ url_for('delete_answer', answer_id=answer.id) }}">
                                        x
                                    </a>
                                </div>
                            {% endif %}
                        </p>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
        <div class="follow-list">
            {% for follow in profile.follows %}
                <p><a href="{{ url_for('profile_page', profile_id=follow.follow.id) }}">{{ follow.follow.username }}</a></p>
            {% endfor %}
        </div>
    </div>
{% endblock %}